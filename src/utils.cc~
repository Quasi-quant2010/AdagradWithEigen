#include "utils.h"

void read(std::string filepath, Eigen::MatrixXd &x, Eigen::VectorXd &l){
  std::ifstream ifs(filepath);
  if(ifs.fail()){
    std::cerr << "File do not exist."<<std::endl;
    exit(0);
  }
  std::string s;
  int index = 0;
  while(std::getline(ifs,s)){
    std::stringstream ss(s);
    int t;
    ss>>t;
    if(t>0){
      l(index) = 1;
    }else{
      l(index) = 0;
    }
    std::string feature;
    while(ss>>feature){
      size_type idx = feature.find(":");
      int n = atoi(feature.substr(0,idx).c_str());
      double value = atof(feature.substr(idx+1).c_str());
      x(index,n-1) = value;
    }
    ++index;
  }
}

